import{_ as L,I as V,a as i,b as t,f as B,h as m,i as h,y as _,w as C,z as I,A as M,k as N,p as T,F as w,e as A,r as p,B as F,c as z,x as U,o as a,t as r,n as j,g as q}from"./index-Dq8SOG-H.js";import{g as Q,d as Y,u as G,c as H}from"./contentService-Ci929EFG.js";import{M as J}from"./Modal-DtVLPGaN.js";import{L as K}from"./LoadingSpinner-DrFe2eLo.js";import{E as O}from"./EmptyState-CugYfD8-.js";import"./api-DaGFE-z-.js";const P={name:"ContentManagement",components:{Modal:J,LoadingSpinner:K,EmptyState:O,Icon:V},setup(){const v=p(!1),e=p(!1),f=p(!1),o=p(null),y=p([]),g=F({search:"",type:"",difficulty:""}),n=F({title:"",description:"",type:"",difficulty:"",estimatedMinutes:30,unit:"",skills:[]}),b=z({get:()=>n.skills.join(", "),set:s=>{n.skills=s.split(",").map(d=>d.trim()).filter(Boolean)}}),c=async()=>{v.value=!0;try{const s=await Q(g);s.success&&(y.value=s.data)}catch(s){console.error("Failed to load content:",s)}finally{v.value=!1}},l=()=>{c()},u=()=>{n.title="",n.description="",n.type="",n.difficulty="",n.estimatedMinutes=30,n.unit="",n.skills=[],o.value=null},k=s=>{o.value=s,n.title=s.title,n.description=s.description,n.type=s.type,n.difficulty=s.difficulty,n.estimatedMinutes=s.estimatedMinutes,n.unit=s.unit,n.skills=[...s.skills],f.value=!0},S=async()=>{e.value=!0;try{let s;o.value?s=await G(o.value.id,{...n}):s=await H({...n}),s.success?(f.value=!1,u(),c()):alert("Error: "+s.message)}catch(s){console.error("Failed to save content:",s),alert("Failed to save content")}finally{e.value=!1}},x=async s=>{if(confirm(`Are you sure you want to delete "${s.title}"?`))try{const d=await Y(s.id);d.success?c():alert("Error: "+d.message)}catch(d){console.error("Failed to delete content:",d),alert("Failed to delete content")}},D=()=>{f.value=!1,u()},E=s=>({beginner:"badge-success",intermediate:"badge-warning",advanced:"badge-danger"})[s]||"badge-info";return U(()=>{c()}),{loading:v,saving:e,showAddModal:f,editingContent:o,contentList:y,filters:g,form:n,skillsInput:b,applyFilters:l,editContent:k,saveContent:S,confirmDelete:x,closeModal:D,getDifficultyClass:E}}},R={class:"content-management"},W={class:"page-header"},X={class:"card mb-3"},Z={class:"form-row"},$={class:"form-group"},tt={class:"form-group"},et={class:"form-group"},st={key:1},lt={key:2,class:"card"},nt={class:"table-container"},ot={class:"table"},at={style:{color:"var(--text-secondary)"}},it={class:"badge badge-info"},rt={class:"skills-tags"},dt={key:0,class:"skill-tag"},ct={class:"action-buttons"},ut=["onClick"],ft=["onClick"];function mt(v,e,f,o,y,g){const n=_("Icon"),b=_("LoadingSpinner"),c=_("EmptyState");return a(),i("div",R,[t("div",W,[e[7]||(e[7]=t("div",null,[t("h1",null,"Content Management"),t("p",null,"Manage learning content and lessons")],-1)),t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=l=>o.showAddModal=!0)},[m(n,{name:"add"}),e[6]||(e[6]=h(" Add Content ",-1))])]),t("div",X,[t("div",Z,[t("div",$,[C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.filters.search=l),type:"text",class:"form-input",placeholder:"Search content..."},null,512),[[I,o.filters.search]])]),t("div",tt,[C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.filters.type=l),class:"form-select"},[...e[8]||(e[8]=[N('<option value="" data-v-5984525f>All Types</option><option value="lesson" data-v-5984525f>Lesson</option><option value="video" data-v-5984525f>Video</option><option value="quiz" data-v-5984525f>Quiz</option><option value="assignment" data-v-5984525f>Assignment</option>',5)])],512),[[M,o.filters.type]])]),t("div",et,[C(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.filters.difficulty=l),class:"form-select"},[...e[9]||(e[9]=[t("option",{value:""},"All Difficulties",-1),t("option",{value:"beginner"},"Beginner",-1),t("option",{value:"intermediate"},"Intermediate",-1),t("option",{value:"advanced"},"Advanced",-1)])],512),[[M,o.filters.difficulty]])]),t("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...l)=>o.applyFilters&&o.applyFilters(...l))},[m(n,{name:"search"}),e[10]||(e[10]=h(" Search ",-1))])])]),o.loading?(a(),B(b,{key:0})):o.contentList.length===0?(a(),i("div",st,[m(c,{icon:"book",message:"No content available yet"},{action:T(()=>[t("button",{class:"btn btn-primary mt-2",onClick:e[5]||(e[5]=l=>o.showAddModal=!0)}," Add Your First Content ")]),_:1})])):(a(),i("div",lt,[t("div",nt,[t("table",ot,[e[12]||(e[12]=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Type"),t("th",null,"Difficulty"),t("th",null,"Est. Time"),t("th",null,"Unit"),t("th",null,"Skills"),t("th",null,"Actions")])],-1)),t("tbody",null,[(a(!0),i(w,null,A(o.contentList,l=>(a(),i("tr",{key:l.id},[t("td",null,[t("strong",null,r(l.title),1),e[11]||(e[11]=t("br",null,null,-1)),t("small",at,r(l.description),1)]),t("td",null,[t("span",it,r(l.type),1)]),t("td",null,[t("span",{class:j(["badge",o.getDifficultyClass(l.difficulty)])},r(l.difficulty),3)]),t("td",null,r(l.estimatedMinutes)+" min",1),t("td",null,r(l.unit),1),t("td",null,[t("div",rt,[(a(!0),i(w,null,A(l.skills.slice(0,2),(u,k)=>(a(),i("span",{key:k,class:"skill-tag"},r(u),1))),128)),l.skills.length>2?(a(),i("span",dt," +"+r(l.skills.length-2),1)):q("",!0)])]),t("td",null,[t("div",ct,[t("button",{class:"btn btn-small btn-secondary",onClick:u=>o.editContent(l),title:"Edit"},[m(n,{name:"edit"})],8,ut),t("button",{class:"btn btn-small btn-danger",onClick:u=>o.confirmDelete(l),title:"Delete"},[m(n,{name:"delete"})],8,ft)])])]))),128))])])])]))])}const _t=L(P,[["render",mt],["__scopeId","data-v-5984525f"]]);export{_t as default};
