import{_ as T,I as x,a as i,f as D,h as r,p as L,y as _,i as d,b as s,t as n,n as u,F as h,e as v,r as p,x as M,u as R,s as E,o,j as z,g as V}from"./index-wMkqQ9cd.js";import{d as F}from"./analyticsService-BMzfXaLd.js";import{a as j,g as G}from"./courseService-DfY3-uIV.js";import{S as H}from"./StatCard-Bf_Gq-TI.js";import{L as U}from"./LoadingSpinner-Bbs66dXJ.js";import{E as q}from"./EmptyState-MRVCyvMI.js";import{f as J}from"./format-sbWH3_uq.js";import"./api-D1efx5EC.js";const K={name:"StudentDetail",components:{StatCard:H,LoadingSpinner:U,EmptyState:q,Icon:x},setup(){const f=R();E();const a=p(!0),y=p(null),t=p([]),b=p({totalTimeMinutes:0,completedContent:0,avgScore:0,engagementScore:0,riskLevel:"low",activityLog:[],strengths:[],improvements:[],aiInsight:""}),C=async()=>{try{a.value=!0;const e=f.params.id,l=await F(e);if(l.success)y.value=l.data.student,b.value=l.data.analytics;else{console.error("Student not found");return}const I=await j(e);if(I.success){const w=await G(),A=w.success?w.data:[];t.value=I.data.map(P=>{const B=A.find(N=>N.id===P.courseId);return{...P,courseName:B?B.title:"Unknown Course"}})}}catch(e){console.error("Failed to load student data:",e)}finally{a.value=!1}},k=e=>e.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2),S=e=>({low:"badge-success",medium:"badge-warning",high:"badge-danger"})[e]||"badge-info",m=e=>({low:"alert-success",medium:"alert-warning",high:"alert-danger"})[e]||"alert-info",g=e=>J(new Date(e),"MMM dd, yyyy HH:mm"),c=e=>e===100?"badge-success":e>=50?"badge-warning":"badge-info";return M(()=>{C()}),{loading:a,student:y,courseProgress:t,analytics:b,getInitials:k,getRiskBadgeClass:S,getAlertClass:m,formatDate:g,getProgressBadgeClass:c}}},O={class:"student-detail"},Q={key:1},W={key:2},X={class:"student-header-card card"},Y={class:"student-header-content"},Z={class:"student-avatar-large"},$={class:"student-info-large"},ss={class:"student-meta"},es={class:"student-badges"},ts={class:"badge badge-info"},as={class:"badge badge-info"},ns={class:"stats-grid"},os={class:"card"},is={class:"card-header"},rs={class:"card-title"},cs={class:"badge badge-info"},ls={key:0},ds={key:1,class:"course-progress-grid"},gs={class:"course-progress-header"},ms={class:"progress-bar-container"},_s={class:"course-progress-stats"},us={class:"progress-stat"},hs={class:"stat-value"},vs={class:"progress-stat"},ps={class:"stat-value"},fs={class:"progress-stat"},ys={class:"stat-value"},bs={class:"grid grid-2"},ks={class:"card"},Ss={class:"card-header"},Cs={class:"card-title"},Is={class:"card"},ws={class:"card-header"},Ps={class:"card-title"},Bs={class:"performance-lists"},Ls={class:"performance-section"},As={class:"section-title"},Ns={key:0,class:"performance-list"},Ts={key:1,class:"empty-text"},xs={class:"performance-section"},Ds={class:"section-title"},Ms={key:0,class:"performance-list"},Rs={key:1,class:"empty-text"},Es={class:"card"},zs={class:"card-header"},Vs={class:"card-title"},Fs={class:"badge badge-info"},js={key:0},Gs={key:1,class:"timeline"},Hs={class:"timeline-content"},Us={class:"timeline-header"},qs={class:"badge badge-info ml-1"},Js={class:"timeline-date"},Ks={class:"timeline-meta"},Os={class:"meta-item"},Qs={class:"meta-item"},Ws={key:0,class:"meta-item score-badge"};function Xs(f,a,y,t,b,C){const k=_("LoadingSpinner"),S=_("router-link"),m=_("EmptyState"),g=_("StatCard"),c=_("Icon");return o(),i("div",O,[t.loading?(o(),D(k,{key:0,message:"Loading student data..."})):t.student?(o(),i("div",W,[s("div",X,[s("button",{class:"back-button",onClick:a[0]||(a[0]=e=>f.$router.back())}," ← Back "),s("div",Y,[s("div",Z,n(t.getInitials(t.student.name)),1),s("div",$,[s("h1",null,n(t.student.name),1),s("p",ss,n(t.student.email),1),s("div",es,[s("span",ts,"Grade "+n(t.student.grade),1),s("span",as,"Class "+n(t.student.class),1),s("span",{class:u(["badge",t.student.status==="active"?"badge-success":"badge-danger"])},n(t.student.status),3)])])])]),s("div",ns,[r(g,{icon:"clock",value:`${t.analytics.totalTimeMinutes} min`,label:"Total Time Spent",iconBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},null,8,["value"]),r(g,{icon:"check",value:t.analytics.completedContent,label:"Completed Content",iconBg:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},null,8,["value"]),r(g,{icon:"chart",value:`${t.analytics.avgScore}%`,label:"Average Score",iconBg:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},null,8,["value"]),r(g,{icon:"lightning",value:`${t.analytics.engagementScore}%`,label:"Engagement Score",iconBg:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},null,8,["value"])]),s("div",os,[s("div",is,[s("h3",rs,[r(c,{name:"book"}),a[2]||(a[2]=d(" Course Progress",-1))]),s("span",cs,n(t.courseProgress.length)+" courses",1)]),t.courseProgress.length===0?(o(),i("div",ls,[r(m,{icon:"book",message:"Not enrolled in any courses yet"})])):(o(),i("div",ds,[(o(!0),i(h,null,v(t.courseProgress,e=>(o(),i("div",{key:e.id,class:"course-progress-card"},[s("div",gs,[s("h4",null,n(e.courseName),1),s("span",{class:u(["badge badge-small",t.getProgressBadgeClass(e.progressPercentage)])},n(e.progressPercentage)+"% ",3)]),s("div",ms,[s("div",{class:"progress-bar",style:z({width:e.progressPercentage+"%"})},null,4)]),s("div",_s,[s("div",us,[a[3]||(a[3]=s("span",{class:"stat-label"},"Completed:",-1)),s("span",hs,n(e.completedContent)+"/"+n(e.totalContent),1)]),s("div",vs,[a[4]||(a[4]=s("span",{class:"stat-label"},"Avg Score:",-1)),s("span",ps,n(e.avgScore>0?e.avgScore+"%":"N/A"),1)]),s("div",fs,[a[5]||(a[5]=s("span",{class:"stat-label"},"Status:",-1)),s("span",ys,n(e.completedAt?"Completed":"In Progress"),1)])])]))),128))]))]),s("div",bs,[s("div",ks,[s("div",Ss,[s("h3",Cs,[r(c,{name:"brain"}),a[6]||(a[6]=d(" AI-Generated Insight",-1))]),s("span",{class:u(["badge",t.getRiskBadgeClass(t.analytics.riskLevel)])}," Risk: "+n(t.analytics.riskLevel),3)]),s("div",{class:u(["alert",t.getAlertClass(t.analytics.riskLevel)])},[r(c,{name:"info",size:"1.2rem"}),s("p",null,n(t.analytics.aiInsight),1)],2)]),s("div",Is,[s("div",ws,[s("h3",Ps,[r(c,{name:"trending-up"}),a[7]||(a[7]=d(" Performance Summary",-1))])]),s("div",Bs,[s("div",Ls,[s("h4",As,[r(c,{name:"star"}),a[8]||(a[8]=d(" Strengths",-1))]),t.analytics.strengths.length>0?(o(),i("ul",Ns,[(o(!0),i(h,null,v(t.analytics.strengths,(e,l)=>(o(),i("li",{key:l},n(e),1))),128))])):(o(),i("p",Ts,"No specific strengths identified yet"))]),s("div",xs,[s("h4",Ds,[r(c,{name:"target"}),a[9]||(a[9]=d(" Areas for Improvement",-1))]),t.analytics.improvements.length>0?(o(),i("ul",Ms,[(o(!0),i(h,null,v(t.analytics.improvements,(e,l)=>(o(),i("li",{key:l},n(e),1))),128))])):(o(),i("p",Rs,"Performing well across all areas"))])])])]),s("div",Es,[s("div",zs,[s("h3",Vs,[r(c,{name:"list"}),a[10]||(a[10]=d(" Activity Timeline",-1))]),s("span",Fs,n(t.analytics.activityLog.length)+" activities",1)]),t.analytics.activityLog.length===0?(o(),i("div",js,[r(m,{icon:"list",message:"No activity recorded yet"})])):(o(),i("div",Gs,[(o(!0),i(h,null,v(t.analytics.activityLog,e=>(o(),i("div",{key:e.id,class:"timeline-item"},[s("div",{class:u(["timeline-marker",e.completed?"marker-success":"marker-warning"])},n(e.completed?"✓":"○"),3),s("div",Hs,[s("div",Us,[s("div",null,[s("strong",null,n(e.contentTitle),1),s("span",qs,n(e.contentType),1)]),s("span",Js,n(t.formatDate(e.timestamp)),1)]),s("div",Ks,[s("span",Os,[r(c,{name:"clock",size:"0.9rem"}),d(" "+n(e.timeMinutes)+" minutes ",1)]),s("span",Qs,n(e.completed?"Completed":"In Progress"),1),e.score!==null?(o(),i("span",Ws,[r(c,{name:"chart",size:"0.9rem"}),d(" Score: "+n(e.score)+"% ",1)])):V("",!0)])])]))),128))]))])])):(o(),i("div",Q,[r(m,{icon:"❌",message:"Student not found"},{action:L(()=>[r(S,{to:"/students",class:"btn btn-primary mt-2"},{default:L(()=>[...a[1]||(a[1]=[d(" Back to Students ",-1)])]),_:1})]),_:1})]))])}const oe=T(K,[["render",Xs],["__scopeId","data-v-6d91fc9a"]]);export{oe as default};
