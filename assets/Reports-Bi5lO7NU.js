import{a as j,b as V,c as U}from"./analyticsService-BMzfXaLd.js";import{d as W,c as z,g as B,S as G}from"./api-D1efx5EC.js";import{L as J}from"./LoadingSpinner-Bbs66dXJ.js";import{_ as H,a as c,b as t,g as C,F as b,e as S,t as a,o as r,j as E,k as X,y as q,h as A,p as O,i as R,n as P,I as Z,f as Q,r as L,x as $}from"./index-wMkqQ9cd.js";async function tt(){await W(1e3);try{const[d,s,i]=await Promise.all([j(),V(),U()]);if(!d.success||!s.success||!i.success)throw new Error("Failed to fetch analytics data");const e=d.data,o=s.data,l=i.data,h=et(e,o,l),g=st(e,o,l),u=nt(e,o,l),_=at(e,o,l);return z({narrative:h,rootCauses:g,recommendations:u,nextSteps:_,generatedAt:new Date().toISOString()})}catch(d){return console.error("AI Analysis error:",d),z(null,!1,d.message)}}function et(d,s,i){var _,y,p,f,w,v,k,T;const e=[],o=((_=d.sessionFrequency)==null?void 0:_.reduce((m,I)=>m+I.frequencyPercentage,0))/(((y=d.sessionFrequency)==null?void 0:y.length)||1);o>=70?e.push({type:"positive",category:"engagement",text:`Student engagement is strong with an average activity rate of ${Math.round(o)}%. Most students are consistently accessing the platform and completing lessons on schedule.`}):o>=40?e.push({type:"neutral",category:"engagement",text:`Student engagement is moderate at ${Math.round(o)}%. While many students are active, there's room to improve consistency and participation rates.`}):e.push({type:"concern",category:"engagement",text:`Student engagement is below expectations at ${Math.round(o)}%. Many students are not regularly accessing the platform, which may impact learning outcomes.`});const l=((p=s.strugglingStudents)==null?void 0:p.length)||0,h=((f=s.highPerformers)==null?void 0:f.length)||0;h>l*2?e.push({type:"positive",category:"performance",text:`Overall performance is excellent with ${h} high-performing students compared to ${l} students needing support. The class is progressing well through the curriculum.`}):l>h?e.push({type:"concern",category:"performance",text:`${l} students are struggling with the material, outnumbering the ${h} high performers. This indicates the current pace or difficulty may need adjustment.`}):e.push({type:"neutral",category:"performance",text:`Performance is balanced with ${h} high performers and ${l} students needing support. The class shows typical learning distribution.`});const g=((w=i.slowdownLessons)==null?void 0:w.length)||0;if(g>0){const m=(v=i.slowdownLessons)==null?void 0:v[0];e.push({type:"concern",category:"cohort",text:`${g} lessons are causing widespread difficulty. "${m==null?void 0:m.title}" has a ${Math.round((m==null?void 0:m.slowdownRate)*100)}% slowdown rate, suggesting content may need revision.`})}else e.push({type:"positive",category:"cohort",text:"No significant cohort-wide bottlenecks detected. Students are progressing through lessons at expected rates across all content."});const u=((k=d.dropOffPoints)==null?void 0:k.length)||0;if(u>0){const m=(T=d.dropOffPoints)==null?void 0:T[0];e.push({type:"concern",category:"completion",text:`${u} curriculum points show student drop-off. ${m==null?void 0:m.dropOffPercentage}% of students don't continue past "${m==null?void 0:m.fromTitle}", indicating a potential barrier.`})}return e}function st(d,s,i){var u,_,y,p;const e=[],o=((u=s.lessonDifficulty)==null?void 0:u.filter(f=>f.rating==="very_hard"))||[];o.length>0&&e.push({issue:"High Lesson Difficulty",evidence:`${o.length} lessons rated as "very hard" with difficulty scores above 60`,likelyCauses:["Content complexity may exceed student readiness level","Insufficient scaffolding or prerequisite knowledge","Lesson pacing too fast for comprehension","Lack of practice examples or guided exercises"],affectedLessons:o.slice(0,3).map(f=>f.title)});const l=((_=d.sessionFrequency)==null?void 0:_.filter(f=>f.frequencyPercentage<40))||[];l.length>5&&e.push({issue:"Low Student Engagement",evidence:`${l.length} students with activity rates below 40%`,likelyCauses:["Students may find content unengaging or irrelevant","Technical barriers preventing consistent access","Lack of motivation or clear learning goals","Competing priorities or time constraints"],affectedStudents:l.slice(0,3).map(f=>f.studentName)});const h=((y=i.laggingGroups)==null?void 0:y.filter(f=>f.lagging))||[];if(h.length>0){const f=h[0];e.push({issue:"Cohort Performance Gaps",evidence:`Class ${f==null?void 0:f.className} showing ${Math.round((1-(f==null?void 0:f.avgCompletion))*100)}% lower completion rates`,likelyCauses:["Differences in prior knowledge or preparation","Varying levels of instructional support","Class-specific scheduling or attendance issues","Need for differentiated instruction approaches"],affectedClasses:h.map(w=>w.className)})}const g=((p=d.timeComparison)==null?void 0:p.filter(f=>f.timeRatio>1.5))||[];return g.length>3&&e.push({issue:"Consistent Time Overruns",evidence:`${g.length} lessons taking 50%+ longer than estimated`,likelyCauses:["Unrealistic time estimates for lesson completion","Content density requiring more processing time","Students lacking efficient learning strategies","Distractions or multitasking during lessons"],affectedLessons:g.slice(0,3).map(f=>f.title)}),e}function nt(d,s,i){var y,p,f,w;const e=[],o=((y=s.strugglingStudents)==null?void 0:y.length)||0;o>0&&e.push({priority:o>5?"high":"medium",category:"intervention",title:"Provide Targeted Support for Struggling Students",description:`${o} students showing signs of difficulty. Consider small group interventions or one-on-one sessions.`,actions:["Schedule individual check-ins with students scoring below 60%","Create peer tutoring pairs with high-performing students","Provide additional practice materials for challenging concepts","Offer office hours or extra help sessions"],expectedImpact:"Improve success rates by 15-20% for at-risk students"});const l=((p=s.lessonDifficulty)==null?void 0:p.filter(v=>v.rating==="very_hard"))||[];l.length>0&&e.push({priority:"high",category:"content",title:"Revise High-Difficulty Lessons",description:`${l.length} lessons causing widespread difficulty. Content revision may improve outcomes.`,actions:["Break complex lessons into smaller, more digestible chunks","Add more worked examples and guided practice","Include video explanations or alternative formats","Adjust estimated time to match actual completion times","Add formative assessments to check understanding earlier"],expectedImpact:"Reduce difficulty scores by 20-30 points",affectedContent:l.slice(0,3).map(v=>v.title)});const h=((f=d.sessionFrequency)==null?void 0:f.reduce((v,k)=>v+k.frequencyPercentage,0))/(((w=d.sessionFrequency)==null?void 0:w.length)||1);h<60&&e.push({priority:"high",category:"engagement",title:"Boost Student Engagement",description:`Average activity rate is ${Math.round(h)}%. Implement strategies to increase consistent participation.`,actions:["Send weekly progress reminders to inactive students","Gamify learning with badges and achievement systems","Set clear weekly goals and deadlines","Create class discussions or collaborative activities","Recognize and celebrate consistent effort publicly"],expectedImpact:"Increase activity rates by 20-25%"});const g=i.slowdownLessons||[];g.length>2&&e.push({priority:"medium",category:"pacing",title:"Adjust Curriculum Pacing",description:`${g.length} lessons showing cohort-wide slowdowns. Consider adjusting timeline.`,actions:["Allocate more class time to challenging topics","Move difficult concepts later in sequence after foundation building","Add prerequisite review sessions before complex lessons","Consider splitting dense lessons into multi-day units"],expectedImpact:"Reduce time overruns by 30-40%",affectedContent:g.slice(0,3).map(v=>v.title)});const u=d.dropOffPoints||[];if(u.length>0){const v=u[0];e.push({priority:"high",category:"retention",title:"Address Curriculum Drop-off Points",description:`${v==null?void 0:v.dropOffPercentage}% student drop-off detected after "${v==null?void 0:v.fromTitle}".`,actions:["Investigate why students stop at this point (surveys, interviews)","Add motivational content or success stories at transition","Provide progress visualization showing how far they've come","Create checkpoints with instructor feedback before drop-off","Simplify the transition to next lesson to reduce friction"],expectedImpact:"Reduce drop-off rates by 10-15%"})}const _={high:1,medium:2,low:3};return e.sort((v,k)=>_[v.priority]-_[k.priority])}function at(d,s,i){var y,p,f,w;const e=[];let o=1;const l=s.strugglingStudents||[];l.length>0&&e.push({timeframe:"immediate",step:o++,action:"Contact Struggling Students",description:`Reach out to ${l.slice(0,5).map(v=>v.studentName).join(", ")}${l.length>5?", and others":""} to offer support.`,effort:"Low",impact:"High"});const h=((y=s.lessonDifficulty)==null?void 0:y.filter(v=>v.rating==="very_hard"))||[];return h.length>0&&e.push({timeframe:"immediate",step:o++,action:"Review Difficult Content",description:`Analyze why "${(p=h[0])==null?void 0:p.title}" has a difficulty score of ${(f=h[0])==null?void 0:f.difficultyScore}/100.`,effort:"Medium",impact:"High"}),(((w=d.sessionFrequency)==null?void 0:w.filter(v=>v.frequencyPercentage<40).length)||0)>3&&e.push({timeframe:"short-term",step:o++,action:"Launch Engagement Campaign",description:"Send motivational messages and set clear weekly goals to re-engage inactive students.",effort:"Low",impact:"Medium"}),h.length>0&&e.push({timeframe:"short-term",step:o++,action:"Add Supplementary Materials",description:`Create additional examples, videos, or practice problems for ${h.slice(0,2).map(v=>v.title).join(" and ")}.`,effort:"Medium",impact:"High"}),(i.slowdownLessons||[]).length>0&&e.push({timeframe:"medium-term",step:o++,action:"Restructure Curriculum Flow",description:"Reorganize lesson sequence to better scaffold difficult concepts and adjust time estimates.",effort:"High",impact:"High"}),(d.dropOffPoints||[]).length>0&&e.push({timeframe:"medium-term",step:o++,action:"Implement Retention Strategies",description:"Add progress tracking, achievement badges, and instructor checkpoints at identified drop-off points.",effort:"Medium",impact:"Medium"}),e.push({timeframe:"long-term",step:o++,action:"Continuous Analytics Review",description:"Schedule monthly data reviews to track improvements and identify emerging patterns.",effort:"Low",impact:"Medium"}),e.push({timeframe:"long-term",step:o++,action:"Collect Student Feedback",description:"Survey students about content difficulty, engagement, and learning preferences.",effort:"Low",impact:"Medium"}),e}const ot={content_001:["variables","basic_operations","algebraic_expressions"],content_002:["variables","substitution","evaluation"],content_003:["equations","solving_linear","balancing"],content_004:["fractions","decimals","conversions"],content_005:["ratios","proportions","cross_multiplication"],content_006:["quadratics","standard_form","factoring_basics"],content_007:["quadratics","solving_methods","quadratic_formula"],content_008:["graphing","parabolas","vertex_form"],content_009:["word_problems","problem_solving","application"],content_010:["functions","domain_range","function_notation"],content_011:["statistics","mean_median_mode","data_analysis"],content_012:["probability","combinations","permutations"],content_013:["geometry","shapes","angles"],content_014:["triangles","pythagorean_theorem","triangle_properties"],content_015:["circles","circumference","arc_measures"],content_016:["trigonometry","sin_cos_tan","unit_circle"],content_017:["trig_applications","real_world","problem_solving"],content_018:["advanced_problems","integration","complex_solving"]},K={variables:"Variables & Constants",basic_operations:"Basic Operations",algebraic_expressions:"Algebraic Expressions",substitution:"Substitution",evaluation:"Expression Evaluation",equations:"Equations",solving_linear:"Solving Linear Equations",balancing:"Equation Balancing",fractions:"Fractions",decimals:"Decimals",conversions:"Conversions",ratios:"Ratios",proportions:"Proportions",cross_multiplication:"Cross Multiplication",quadratics:"Quadratic Equations",standard_form:"Standard Form",factoring_basics:"Factoring Basics",solving_methods:"Solving Methods",quadratic_formula:"Quadratic Formula",graphing:"Graphing",parabolas:"Parabolas",vertex_form:"Vertex Form",word_problems:"Word Problems",problem_solving:"Problem Solving",application:"Real-World Application",functions:"Functions",domain_range:"Domain & Range",function_notation:"Function Notation",statistics:"Statistics",mean_median_mode:"Mean, Median, Mode",data_analysis:"Data Analysis",probability:"Probability",combinations:"Combinations",permutations:"Permutations",geometry:"Geometry Fundamentals",shapes:"Shapes",angles:"Angles",triangles:"Triangles",pythagorean_theorem:"Pythagorean Theorem",triangle_properties:"Triangle Properties",circles:"Circles",circumference:"Circumference",arc_measures:"Arc Measures",trigonometry:"Trigonometry",sin_cos_tan:"Sin, Cos, Tan",unit_circle:"Unit Circle",trig_applications:"Trig Applications",real_world:"Real World Problems",advanced_problems:"Advanced Problems",integration:"Integration",complex_solving:"Complex Problem Solving"};function it(d,s,i){const e=ot[d]||["general"],o=10,l=Math.round(s/100*o),h=[];for(let g=1;g<=o;g++){const u=e[g%e.length],_=i?g<=l:Math.random()>.5;h.push({questionNumber:g,topic:u,topicName:K[u]||u,isCorrect:_,timeSpent:Math.floor(Math.random()*180)+30,attempts:_?1:Math.floor(Math.random()*2)+1})}return h}async function rt(){await W(800);try{const d=B(G.STUDENTS)||[],s=B(G.CONTENT)||[],e=(B(G.EVENTS)||[]).filter(p=>p.contentId.includes("content")&&p.score!==null&&p.score!==void 0||s.find(f=>f.id===p.contentId&&f.type==="assignment")),o=e.map(p=>{const f=d.find(k=>k.id===p.studentId),w=s.find(k=>k.id===p.contentId),v=p.score||0;return{eventId:p.id,studentId:p.studentId,studentName:(f==null?void 0:f.name)||"Unknown",contentId:p.contentId,contentTitle:(w==null?void 0:w.title)||"Unknown",score:v,completed:p.completed,timestamp:p.timestamp,questions:it(p.contentId,v,p.completed)}}),l=Y(o,d),h=ct(o,d),g=lt(e),u=dt(o,s),_=ut(o,d),y=gt(o);return z({topicMastery:l,knowledgeGaps:h,scoreDistribution:g,questionDifficulty:u,performanceMatrix:_,commonMistakes:y,totalAssessments:e.length,totalStudents:d.length})}catch(d){return console.error("Assessment analytics error:",d),z(null,!1,d.message)}}function Y(d,s){const i={};return d.forEach(e=>{e.questions.forEach(o=>{i[o.topic]||(i[o.topic]={topic:o.topic,topicName:o.topicName,totalQuestions:0,correctAnswers:0,studentAttempts:new Set}),i[o.topic].totalQuestions++,o.isCorrect&&i[o.topic].correctAnswers++,i[o.topic].studentAttempts.add(e.studentId)})}),Object.values(i).map(e=>{const o=Math.round(e.correctAnswers/e.totalQuestions*100);let l="struggling";return o>=80?l="mastered":o>=60?l="proficient":o>=40&&(l="developing"),{topic:e.topic,topicName:e.topicName,masteryPercentage:o,masteryLevel:l,totalQuestions:e.totalQuestions,correctAnswers:e.correctAnswers,incorrectAnswers:e.totalQuestions-e.correctAnswers,studentsAttempted:e.studentAttempts.size}}).sort((e,o)=>e.masteryPercentage-o.masteryPercentage)}function ct(d,s){return Y(d).filter(o=>o.masteryPercentage<60).map(o=>{const l=[];d.forEach(u=>{const _=u.questions.filter(y=>y.topic===o.topic);if(_.length>0){const y=_.filter(p=>p.isCorrect).length/_.length*100;y<60&&l.push({studentId:u.studentId,studentName:u.studentName,topicScore:Math.round(y),questionsAttempted:_.length,questionsCorrect:_.filter(p=>p.isCorrect).length})}});const h=[],g={};return l.forEach(u=>{(!g[u.studentId]||u.topicScore<g[u.studentId].topicScore)&&(g[u.studentId]=u)}),Object.values(g).forEach(u=>h.push(u)),{...o,strugglingStudentCount:h.length,strugglingStudents:h.sort((u,_)=>u.topicScore-_.topicScore).slice(0,10)}})}function lt(d){const s=[{range:"0-10",min:0,max:10,count:0},{range:"11-20",min:11,max:20,count:0},{range:"21-30",min:21,max:30,count:0},{range:"31-40",min:31,max:40,count:0},{range:"41-50",min:41,max:50,count:0},{range:"51-60",min:51,max:60,count:0},{range:"61-70",min:61,max:70,count:0},{range:"71-80",min:71,max:80,count:0},{range:"81-90",min:81,max:90,count:0},{range:"91-100",min:91,max:100,count:0}];d.forEach(u=>{const _=u.score||0,y=s.find(p=>_>=p.min&&_<=p.max);y&&y.count++});const i=d.map(u=>u.score||0),e=i.length>0?i.reduce((u,_)=>u+_,0)/i.length:0,o=[...i].sort((u,_)=>u-_),l=i.length>0?o[Math.floor(i.length/2)]:0,h=i.length>0?Math.max(...i):0,g=i.length>0?Math.min(...i):0;return{bins:s,statistics:{avgScore:Math.round(e),medianScore:Math.round(l),maxScore:h,minScore:g,totalAssessments:d.length,passingRate:Math.round(i.filter(u=>u>=60).length/i.length*100)}}}function dt(d,s){const i={};return d.forEach(e=>{e.questions.forEach(o=>{const l=`${e.contentId}_Q${o.questionNumber}`;i[l]||(i[l]={contentId:e.contentId,contentTitle:e.contentTitle,questionNumber:o.questionNumber,topic:o.topic,topicName:o.topicName,totalAttempts:0,correctAttempts:0,avgTimeSpent:0,timeSum:0}),i[l].totalAttempts++,o.isCorrect&&i[l].correctAttempts++,i[l].timeSum+=o.timeSpent})}),Object.values(i).map(e=>{const o=e.correctAttempts/e.totalAttempts*100,l=Math.round(e.timeSum/e.totalAttempts);let h="medium";return o>=80?h="easy":o<50&&(h="hard"),{...e,successRate:Math.round(o),avgTimeSpent:l,difficulty:h}}).sort((e,o)=>e.successRate-o.successRate)}function ut(d,s){const i=[],e=new Set;d.forEach(l=>l.questions.forEach(h=>e.add(h.topic)));const o=Array.from(e);return s.forEach(l=>{const h=d.filter(u=>u.studentId===l.id),g={};o.forEach(u=>{const _=[];if(h.forEach(y=>{const p=y.questions.filter(f=>f.topic===u);_.push(...p)}),_.length>0){const y=_.filter(p=>p.isCorrect).length;g[u]=Math.round(y/_.length*100)}else g[u]=null}),i.push({studentId:l.id,studentName:l.name,topicScores:g})}),{matrix:i,topics:o.map(l=>({topic:l,topicName:K[l]||l}))}}function gt(d){const s={};return d.forEach(i=>{i.questions.forEach(e=>{e.isCorrect||(s[e.topic]||(s[e.topic]={topic:e.topic,topicName:e.topicName,errorCount:0,totalAttempts:0,affectedStudents:new Set}),s[e.topic].errorCount++,s[e.topic].affectedStudents.add(i.studentId)),s[e.topic]&&s[e.topic].totalAttempts++})}),Object.values(s).map(i=>({topic:i.topic,topicName:i.topicName,errorCount:i.errorCount,errorRate:Math.round(i.errorCount/i.totalAttempts*100),affectedStudentCount:i.affectedStudents.size})).sort((i,e)=>e.errorCount-i.errorCount).slice(0,10)}const mt={name:"ScoreDistributionChart",props:{bins:{type:Array,required:!0},statistics:{type:Object,default:null}},methods:{getBarHeight(d){if(!this.bins||this.bins.length===0)return 0;const s=Math.max(...this.bins.map(i=>i.count));return s===0?0:d/s*100},getBarColor(d){const s=parseInt(d.split("-")[0]);return s>=80?"linear-gradient(135deg, #10b981 0%, #059669 100%)":s>=60?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":s>=40?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"}}},ht={class:"score-distribution-chart"},pt={class:"chart-container"},ft={class:"bars"},_t={class:"bar-wrapper"},vt={key:0,class:"bar-label"},yt={class:"bar-range"},bt={key:0,class:"statistics-grid"},St={class:"stat-item"},Ct={class:"stat-value"},wt={class:"stat-item"},kt={class:"stat-value"},At={class:"stat-item"},xt={class:"stat-value"},It={class:"stat-item"},Mt={class:"stat-value"};function Pt(d,s,i,e,o,l){return r(),c("div",ht,[t("div",pt,[t("div",ft,[(r(!0),c(b,null,S(i.bins,h=>(r(),c("div",{key:h.range,class:"bar-container"},[t("div",_t,[t("div",{class:"bar",style:E({height:l.getBarHeight(h.count)+"%",background:l.getBarColor(h.range)})},[h.count>0?(r(),c("span",vt,a(h.count),1)):C("",!0)],4)]),t("span",yt,a(h.range),1)]))),128))])]),i.statistics?(r(),c("div",bt,[t("div",St,[s[0]||(s[0]=t("span",{class:"stat-label"},"Average",-1)),t("span",Ct,a(i.statistics.avgScore)+"%",1)]),t("div",wt,[s[1]||(s[1]=t("span",{class:"stat-label"},"Median",-1)),t("span",kt,a(i.statistics.medianScore)+"%",1)]),t("div",At,[s[2]||(s[2]=t("span",{class:"stat-label"},"Passing Rate",-1)),t("span",xt,a(i.statistics.passingRate)+"%",1)]),t("div",It,[s[3]||(s[3]=t("span",{class:"stat-label"},"Total Assessments",-1)),t("span",Mt,a(i.statistics.totalAssessments),1)])])):C("",!0)])}const Rt=H(mt,[["render",Pt],["__scopeId","data-v-a2980080"]]),Tt={name:"TopicMasteryHeatmap",props:{matrix:{type:Array,required:!0},topics:{type:Array,required:!0}},methods:{getScoreClass(d){return d>=80?"mastered":d>=60?"proficient":d>=40?"developing":"struggling"}}},Dt={class:"topic-mastery-heatmap"},Nt={class:"heatmap-container"},Lt={class:"heatmap-scroll"},Et={class:"heatmap-table"},qt={class:"topic-header-content"},Ft={class:"student-cell"},Ot=["title"],zt={key:1,class:"score-indicator no-data",title:"Not attempted"};function Bt(d,s,i,e,o,l){const h=q("router-link");return r(),c("div",Dt,[t("div",Nt,[t("div",Lt,[t("table",Et,[t("thead",null,[t("tr",null,[s[0]||(s[0]=t("th",{class:"student-header"},"Student",-1)),(r(!0),c(b,null,S(i.topics,g=>(r(),c("th",{key:g.topic,class:"topic-header"},[t("div",qt,[t("span",null,a(g.topicName),1)])]))),128))])]),t("tbody",null,[(r(!0),c(b,null,S(i.matrix,g=>(r(),c("tr",{key:g.studentId},[t("td",Ft,[A(h,{to:`/students/${g.studentId}`,class:"student-link"},{default:O(()=>[R(a(g.studentName),1)]),_:2},1032,["to"])]),(r(!0),c(b,null,S(i.topics,u=>(r(),c("td",{key:u.topic,class:"score-cell"},[g.topicScores[u.topic]!==null?(r(),c("div",{key:0,class:P(["score-indicator",l.getScoreClass(g.topicScores[u.topic])]),title:`${u.topicName}: ${g.topicScores[u.topic]}%`},a(g.topicScores[u.topic])+"% ",11,Ot)):(r(),c("div",zt," - "))]))),128))]))),128))])])])]),s[1]||(s[1]=X('<div class="legend" data-v-ec4be878><span class="legend-title" data-v-ec4be878>Mastery Level:</span><div class="legend-items" data-v-ec4be878><div class="legend-item" data-v-ec4be878><div class="legend-color mastered" data-v-ec4be878></div><span data-v-ec4be878>Mastered (80%+)</span></div><div class="legend-item" data-v-ec4be878><div class="legend-color proficient" data-v-ec4be878></div><span data-v-ec4be878>Proficient (60-79%)</span></div><div class="legend-item" data-v-ec4be878><div class="legend-color developing" data-v-ec4be878></div><span data-v-ec4be878>Developing (40-59%)</span></div><div class="legend-item" data-v-ec4be878><div class="legend-color struggling" data-v-ec4be878></div><span data-v-ec4be878>Struggling (&lt;40%)</span></div><div class="legend-item" data-v-ec4be878><div class="legend-color no-data" data-v-ec4be878></div><span data-v-ec4be878>No Data</span></div></div></div>',1))])}const Gt=H(Tt,[["render",Bt],["__scopeId","data-v-ec4be878"]]),Ht={name:"Reports",components:{LoadingSpinner:J,Icon:Z,ScoreDistributionChart:Rt,TopicMasteryHeatmap:Gt},setup(){const d=L(!0),s=L(null),i=L(null),e=L({}),o=L({}),l=L({}),h=async()=>{try{d.value=!0;const[m,I,M,F]=await Promise.all([j(),V(),U(),rt()]);m.success&&(e.value=m.data),I.success&&(o.value=I.data),M.success&&(l.value=M.data),F.success&&(i.value=F.data);const n=await tt();n.success&&(s.value=n.data)}catch(m){console.error("Failed to load reports:",m)}finally{d.value=!1}},g=(m,I)=>{const M=m/I;return M>1.5?"badge-danger":M<.7?"badge-warning":"badge-success"},u=(m,I)=>{const M=m/I;return M>1.5?"Too Slow":M<.7?"Too Fast":"On Pace"},_=m=>m>=75?"badge-success":m>=50?"badge-warning":"badge-danger",y=m=>m>=75?"Excellent":m>=50?"Good":"Low",p=m=>m>=60?"#ef4444":m>=40?"#f97316":m>=20?"#fbbf24":"#10b981",f=m=>m==="very_hard"?"badge-danger":m==="hard"?"badge-warning":m==="moderate"?"badge-info":"badge-success",w=m=>m==="positive"?"narrative-positive":m==="concern"?"narrative-concern":"narrative-neutral",v=m=>m==="positive"?"check":m==="concern"?"alert":"info",k=m=>m==="high"?"badge-danger":m==="medium"?"badge-warning":"badge-info",T=m=>m==="immediate"?"badge-danger":m==="short-term"?"badge-warning":m==="medium-term"?"badge-info":"badge-secondary";return $(h),{loading:d,aiInsights:s,assessmentData:i,engagementStats:e,performanceStats:o,cohortStats:l,getTimeStatusClass:g,getTimeStatus:u,getFrequencyClass:_,getFrequencyStatus:y,getDifficultyColor:p,getDifficultyClass:f,getNarrativeTypeClass:w,getNarrativeIcon:v,getPriorityBadgeClass:k,getTimeframeBadgeClass:T}}},Qt={class:"reports-view"},jt={key:1,class:"reports-container"},Vt={key:0,class:"report-section ai-insights-section"},Ut={class:"section-header"},Wt={class:"badge badge-secondary ml-auto"},Kt={key:0,class:"card mb-2"},Yt={class:"card-header"},Jt={class:"badge badge-info"},Xt={class:"card-body"},Zt={class:"narrative-list"},$t={class:"narrative-icon"},te={class:"narrative-content"},ee={class:"narrative-category"},se={key:1,class:"card mb-2"},ne={class:"card-header"},ae={class:"badge badge-warning"},oe={class:"card-body"},ie={class:"root-cause-list"},re={class:"root-cause-header"},ce={class:"badge badge-small badge-secondary"},le={class:"root-cause-body"},de={class:"cause-list"},ue={key:0,class:"section-label"},ge={class:"affected-items"},me={key:2,class:"card mb-2"},he={class:"card-header"},pe={class:"badge badge-success"},fe={class:"card-body"},_e={class:"recommendation-list"},ve={class:"recommendation-header"},ye={class:"badge badge-small badge-secondary"},be={class:"recommendation-description"},Se={class:"recommendation-actions"},Ce={class:"action-steps"},we={class:"recommendation-impact"},ke={key:0,class:"section-label"},Ae={class:"affected-items"},xe={key:3,class:"card"},Ie={class:"card-header"},Me={class:"badge badge-info"},Pe={class:"card-body"},Re={class:"next-steps-timeline"},Te={class:"timeline-marker"},De={class:"timeline-content"},Ne={class:"timeline-header"},Le={class:"effort-impact"},Ee={class:"effort-badge"},qe={class:"impact-badge"},Fe={key:1,class:"report-section mt-3"},Oe={class:"section-header"},ze={class:"card mb-2"},Be={class:"card-header"},Ge={class:"badge badge-info"},He={class:"card-body"},Qe={class:"card mb-2"},je={class:"card-header"},Ve={class:"badge badge-success"},Ue={class:"card-body"},We={class:"topic-mastery-grid"},Ke={class:"topic-mastery-header"},Ye={class:"topic-mastery-body"},Je={class:"mastery-percentage"},Xe={class:"percentage-value"},Ze={class:"mastery-stats"},$e={class:"stat"},ts={class:"stat"},es={class:"mastery-bar"},ss={key:0,class:"card mb-2"},ns={class:"card-header"},as={class:"badge badge-warning"},os={class:"card-body"},is={class:"knowledge-gaps-list"},rs={class:"gap-header"},cs={class:"gap-title"},ls={class:"gap-percentage"},ds={class:"gap-details"},us={class:"gap-description"},gs={class:"gap-stats"},ms={key:0,class:"struggling-students"},hs={class:"students-chips"},ps={key:0,class:"more-students"},fs={key:1,class:"card mb-2"},_s={class:"card-header"},vs={class:"badge badge-info"},ys={class:"card-body"},bs={key:0,class:"matrix-note"},Ss={key:2,class:"card"},Cs={class:"card-header"},ws={class:"badge badge-danger"},ks={class:"table-container"},As={class:"data-table"},xs={class:"lesson-title"},Is={class:"progress-bar-mini"},Ms={class:"progress-text"},Ps={class:"report-section"},Rs={class:"section-header"},Ts={class:"card mb-2"},Ds={class:"card-header"},Ns={class:"badge badge-info"},Ls={class:"table-container"},Es={class:"data-table"},qs={class:"lesson-title"},Fs={class:"progress-bar-mini"},Os={class:"progress-text"},zs={class:"card mb-2"},Bs={class:"card-header"},Gs={class:"badge badge-success"},Hs={class:"table-container"},Qs={class:"data-table"},js={class:"progress-bar-mini"},Vs={class:"progress-text"},Us={key:0,class:"card"},Ws={class:"card-header"},Ks={class:"badge badge-warning"},Ys={class:"table-container"},Js={class:"data-table"},Xs={class:"badge badge-danger"},Zs={class:"report-section mt-3"},$s={class:"section-header"},tn={class:"card mb-2"},en={class:"card-header"},sn={class:"badge badge-info"},nn={class:"table-container"},an={class:"data-table"},on={class:"lesson-title"},rn={class:"difficulty-bar"},cn={class:"difficulty-text"},ln={key:0,class:"card mb-2"},dn={class:"card-header"},un={class:"badge badge-warning"},gn={class:"table-container"},mn={class:"data-table"},hn={class:"badge badge-danger"},pn={key:1,class:"card"},fn={class:"card-header"},_n={class:"badge badge-success"},vn={class:"table-container"},yn={class:"data-table"},bn={class:"badge badge-success"},Sn={class:"report-section mt-3"},Cn={class:"section-header"},wn={key:0,class:"card mb-2"},kn={class:"card-header"},An={class:"badge badge-warning"},xn={class:"table-container"},In={class:"data-table"},Mn={class:"lesson-title"},Pn={class:"badge badge-warning"},Rn={key:1,class:"card mb-2"},Tn={class:"card-header"},Dn={class:"badge badge-success"},Nn={class:"table-container"},Ln={class:"data-table"},En={class:"lesson-title"},qn={class:"badge badge-small badge-info"},Fn={class:"badge badge-success"},On={class:"card"},zn={class:"card-header"},Bn={class:"badge badge-info"},Gn={class:"table-container"},Hn={class:"data-table"};function Qn(d,s,i,e,o,l){var p,f,w,v,k,T,m,I,M,F;const h=q("LoadingSpinner"),g=q("Icon"),u=q("ScoreDistributionChart"),_=q("router-link"),y=q("TopicMasteryHeatmap");return r(),c("div",Qt,[s[43]||(s[43]=t("div",{class:"page-header"},[t("h1",null,"Analytics Reports"),t("p",null,"Comprehensive insights into student engagement, performance, and cohort trends")],-1)),e.loading?(r(),Q(h,{key:0})):(r(),c("div",jt,[e.aiInsights?(r(),c("section",Vt,[t("div",Ut,[A(g,{name:"info",size:"1.5rem"}),s[0]||(s[0]=t("h2",null,"AI-Generated Insights",-1)),t("span",Wt,"Generated "+a(new Date(e.aiInsights.generatedAt).toLocaleTimeString()),1)]),e.aiInsights.narrative&&e.aiInsights.narrative.length>0?(r(),c("div",Kt,[t("div",Yt,[s[1]||(s[1]=t("h3",{class:"card-title"},"Executive Summary",-1)),t("span",Jt,a(e.aiInsights.narrative.length)+" insights",1)]),t("div",Xt,[t("div",Zt,[(r(!0),c(b,null,S(e.aiInsights.narrative,(n,x)=>(r(),c("div",{key:x,class:P(["narrative-item",e.getNarrativeTypeClass(n.type)])},[t("div",$t,[A(g,{name:e.getNarrativeIcon(n.type),size:"1.2rem"},null,8,["name"])]),t("div",te,[t("span",ee,a(n.category.toUpperCase()),1),t("p",null,a(n.text),1)])],2))),128))])])])):C("",!0),e.aiInsights.rootCauses&&e.aiInsights.rootCauses.length>0?(r(),c("div",se,[t("div",ne,[s[2]||(s[2]=t("h3",{class:"card-title"},"Root Cause Analysis",-1)),t("span",ae,a(e.aiInsights.rootCauses.length)+" issues identified",1)]),t("div",oe,[t("div",ie,[(r(!0),c(b,null,S(e.aiInsights.rootCauses,(n,x)=>(r(),c("div",{key:x,class:"root-cause-item"},[t("div",re,[t("h4",null,a(n.issue),1),t("span",ce,a(n.evidence),1)]),t("div",le,[s[4]||(s[4]=t("p",{class:"section-label"},"Likely Causes:",-1)),t("ul",de,[(r(!0),c(b,null,S(n.likelyCauses,(D,N)=>(r(),c("li",{key:N},a(D),1))),128))]),n.affectedLessons||n.affectedStudents||n.affectedClasses?(r(),c("p",ue,[s[3]||(s[3]=R(" Affected: ",-1)),t("span",ge,a((n.affectedLessons||n.affectedStudents||n.affectedClasses||[]).join(", ")),1)])):C("",!0)])]))),128))])])])):C("",!0),e.aiInsights.recommendations&&e.aiInsights.recommendations.length>0?(r(),c("div",me,[t("div",he,[s[5]||(s[5]=t("h3",{class:"card-title"},"Actionable Recommendations",-1)),t("span",pe,a(e.aiInsights.recommendations.length)+" recommendations",1)]),t("div",fe,[t("div",_e,[(r(!0),c(b,null,S(e.aiInsights.recommendations,(n,x)=>(r(),c("div",{key:x,class:"recommendation-item"},[t("div",ve,[t("span",{class:P(["badge",e.getPriorityBadgeClass(n.priority)])},a(n.priority.toUpperCase())+" PRIORITY ",3),t("span",ye,a(n.category),1)]),t("h4",null,a(n.title),1),t("p",be,a(n.description),1),t("div",Se,[s[6]||(s[6]=t("p",{class:"section-label"},"Action Steps:",-1)),t("ol",Ce,[(r(!0),c(b,null,S(n.actions,(D,N)=>(r(),c("li",{key:N},a(D),1))),128))])]),t("div",we,[A(g,{name:"chart",size:"1rem"}),t("span",null,[s[7]||(s[7]=R("Expected Impact: ",-1)),t("strong",null,a(n.expectedImpact),1)])]),n.affectedContent&&n.affectedContent.length>0?(r(),c("p",ke,[s[8]||(s[8]=R(" Affected Content: ",-1)),t("span",Ae,a(n.affectedContent.join(", ")),1)])):C("",!0)]))),128))])])])):C("",!0),e.aiInsights.nextSteps&&e.aiInsights.nextSteps.length>0?(r(),c("div",xe,[t("div",Ie,[s[9]||(s[9]=t("h3",{class:"card-title"},"Next Steps Action Plan",-1)),t("span",Me,a(e.aiInsights.nextSteps.length)+" steps",1)]),t("div",Pe,[t("div",Re,[(r(!0),c(b,null,S(e.aiInsights.nextSteps,n=>(r(),c("div",{key:n.step,class:"timeline-item"},[t("div",Te,a(n.step),1),t("div",De,[t("div",Ne,[t("span",{class:P(["badge badge-small",e.getTimeframeBadgeClass(n.timeframe)])},a(n.timeframe.replace("-"," ").toUpperCase()),3),t("div",Le,[t("span",Ee,"Effort: "+a(n.effort),1),t("span",qe,"Impact: "+a(n.impact),1)])]),t("h4",null,a(n.action),1),t("p",null,a(n.description),1)])]))),128))])])])):C("",!0)])):C("",!0),e.assessmentData?(r(),c("section",Fe,[t("div",Oe,[A(g,{name:"file",size:"1.5rem"}),s[10]||(s[10]=t("h2",null,"Assessment Analysis",-1))]),t("div",ze,[t("div",Be,[s[11]||(s[11]=t("h3",{class:"card-title"},"Score Distribution",-1)),t("span",Ge,a(e.assessmentData.totalAssessments)+" assessments",1)]),t("div",He,[A(u,{bins:e.assessmentData.scoreDistribution.bins,statistics:e.assessmentData.scoreDistribution.statistics},null,8,["bins","statistics"])])]),t("div",Qe,[t("div",je,[s[12]||(s[12]=t("h3",{class:"card-title"},"Topic Mastery Overview",-1)),t("span",Ve,a(((p=e.assessmentData.topicMastery)==null?void 0:p.length)||0)+" topics",1)]),t("div",Ue,[t("div",We,[(r(!0),c(b,null,S(e.assessmentData.topicMastery,n=>(r(),c("div",{key:n.topic,class:"topic-mastery-card"},[t("div",Ke,[t("h4",null,a(n.topicName),1),t("span",{class:P(["mastery-badge","mastery-"+n.masteryLevel])},a(n.masteryLevel),3)]),t("div",Ye,[t("div",Je,[t("span",Xe,a(n.masteryPercentage)+"%",1),s[13]||(s[13]=t("span",{class:"percentage-label"},"Class Mastery",-1))]),t("div",Ze,[t("div",$e,[A(g,{name:"check",size:"1rem"}),t("span",null,a(n.correctAnswers)+"/"+a(n.totalQuestions),1)]),t("div",ts,[A(g,{name:"users",size:"1rem"}),t("span",null,a(n.studentsAttempted)+" students",1)])]),t("div",es,[t("div",{class:"mastery-fill",style:E({width:n.masteryPercentage+"%"})},null,4)])])]))),128))])])]),e.assessmentData.knowledgeGaps&&e.assessmentData.knowledgeGaps.length>0?(r(),c("div",ss,[t("div",ns,[s[14]||(s[14]=t("h3",{class:"card-title"},"Knowledge Gaps",-1)),t("span",as,a(e.assessmentData.knowledgeGaps.length)+" gaps identified",1)]),t("div",os,[t("div",is,[(r(!0),c(b,null,S(e.assessmentData.knowledgeGaps,n=>(r(),c("div",{key:n.topic,class:"gap-item"},[t("div",rs,[t("div",cs,[A(g,{name:"alert",size:"1.2rem",style:{color:"#f59e0b"}}),t("h4",null,a(n.topicName),1)]),t("span",ls,a(n.masteryPercentage)+"% mastery",1)]),t("div",ds,[t("p",us,[t("strong",null,a(n.strugglingStudentCount)+" students",1),s[15]||(s[15]=R(" need support in this topic. ",-1)),t("span",gs,a(n.incorrectAnswers)+" incorrect answers out of "+a(n.totalQuestions)+" questions.",1)]),n.strugglingStudents&&n.strugglingStudents.length>0?(r(),c("div",ms,[s[16]||(s[16]=t("span",{class:"students-label"},"Students needing help:",-1)),t("div",hs,[(r(!0),c(b,null,S(n.strugglingStudents.slice(0,5),x=>(r(),Q(_,{key:x.studentId,to:`/students/${x.studentId}`,class:"student-chip"},{default:O(()=>[R(a(x.studentName)+" ("+a(x.topicScore)+"%) ",1)]),_:2},1032,["to"]))),128)),n.strugglingStudents.length>5?(r(),c("span",ps," +"+a(n.strugglingStudents.length-5)+" more ",1)):C("",!0)])])):C("",!0)])]))),128))])])])):C("",!0),e.assessmentData.performanceMatrix?(r(),c("div",fs,[t("div",_s,[s[17]||(s[17]=t("h3",{class:"card-title"},"Student × Topic Performance Matrix",-1)),t("span",vs,a(e.assessmentData.performanceMatrix.topics.length)+" topics × "+a(e.assessmentData.totalStudents)+" students",1)]),t("div",ys,[A(y,{matrix:e.assessmentData.performanceMatrix.matrix.slice(0,15),topics:e.assessmentData.performanceMatrix.topics},null,8,["matrix","topics"]),e.assessmentData.totalStudents>15?(r(),c("p",bs," Showing top 15 students. Full matrix available in individual student reports. ")):C("",!0)])])):C("",!0),e.assessmentData.commonMistakes&&e.assessmentData.commonMistakes.length>0?(r(),c("div",Ss,[t("div",Cs,[s[18]||(s[18]=t("h3",{class:"card-title"},"Most Common Mistakes",-1)),t("span",ws,a(e.assessmentData.commonMistakes.length)+" error patterns",1)]),t("div",ks,[t("table",As,[s[19]||(s[19]=t("thead",null,[t("tr",null,[t("th",null,"Topic"),t("th",null,"Error Count"),t("th",null,"Error Rate"),t("th",null,"Students Affected")])],-1)),t("tbody",null,[(r(!0),c(b,null,S(e.assessmentData.commonMistakes,n=>(r(),c("tr",{key:n.topic},[t("td",xs,a(n.topicName),1),t("td",null,a(n.errorCount),1),t("td",null,[t("div",Is,[t("div",{class:"progress-fill error-fill",style:E({width:n.errorRate+"%"})},null,4)]),t("span",Ms,a(n.errorRate)+"%",1)]),t("td",null,a(n.affectedStudentCount),1)]))),128))])])])])):C("",!0)])):C("",!0),t("section",Ps,[t("div",Rs,[A(g,{name:"chart",size:"1.5rem"}),s[20]||(s[20]=t("h2",null,"Engagement Analytics",-1))]),t("div",Ts,[t("div",Ds,[s[21]||(s[21]=t("h3",{class:"card-title"},"Time Per Lesson",-1)),t("span",Ns,a(((f=e.engagementStats.timePerLesson)==null?void 0:f.length)||0)+" lessons",1)]),t("div",Ls,[t("table",Es,[s[22]||(s[22]=t("thead",null,[t("tr",null,[t("th",null,"Lesson"),t("th",null,"Avg Time"),t("th",null,"Estimated"),t("th",null,"Students"),t("th",null,"Completion"),t("th",null,"Status")])],-1)),t("tbody",null,[(r(!0),c(b,null,S((w=e.engagementStats.timePerLesson)==null?void 0:w.slice(0,10),n=>(r(),c("tr",{key:n.contentId},[t("td",qs,a(n.title),1),t("td",null,a(n.avgTimeMinutes)+"m",1),t("td",null,a(n.estimatedMinutes)+"m",1),t("td",null,a(n.studentCount),1),t("td",null,[t("div",Fs,[t("div",{class:"progress-fill",style:E({width:n.completionRate+"%"})},null,4)]),t("span",Os,a(n.completionRate)+"%",1)]),t("td",null,[t("span",{class:P(["badge badge-small",e.getTimeStatusClass(n.avgTimeMinutes,n.estimatedMinutes)])},a(e.getTimeStatus(n.avgTimeMinutes,n.estimatedMinutes)),3)])]))),128))])])])]),t("div",zs,[t("div",Bs,[s[23]||(s[23]=t("h3",{class:"card-title"},"Student Activity Frequency",-1)),t("span",Gs,a(((v=e.engagementStats.sessionFrequency)==null?void 0:v.length)||0)+" students",1)]),t("div",Hs,[t("table",Qs,[s[24]||(s[24]=t("thead",null,[t("tr",null,[t("th",null,"Student"),t("th",null,"Active Days"),t("th",null,"Total Days"),t("th",null,"Frequency"),t("th",null,"Status")])],-1)),t("tbody",null,[(r(!0),c(b,null,S((k=e.engagementStats.sessionFrequency)==null?void 0:k.slice(0,10),n=>(r(),c("tr",{key:n.studentId},[t("td",null,a(n.studentName),1),t("td",null,a(n.activeDays),1),t("td",null,a(n.totalDays),1),t("td",null,[t("div",js,[t("div",{class:"progress-fill",style:E({width:n.frequencyPercentage+"%"})},null,4)]),t("span",Vs,a(n.frequencyPercentage)+"%",1)]),t("td",null,[t("span",{class:P(["badge badge-small",e.getFrequencyClass(n.frequencyPercentage)])},a(e.getFrequencyStatus(n.frequencyPercentage)),3)])]))),128))])])])]),e.engagementStats.dropOffPoints&&e.engagementStats.dropOffPoints.length>0?(r(),c("div",Us,[t("div",Ws,[s[25]||(s[25]=t("h3",{class:"card-title"},"Curriculum Drop-off Points",-1)),t("span",Ks,a(e.engagementStats.dropOffPoints.length)+" identified",1)]),t("div",Ys,[t("table",Js,[s[26]||(s[26]=t("thead",null,[t("tr",null,[t("th",null,"From Lesson"),t("th",null,"To Lesson"),t("th",null,"Drop-off Count"),t("th",null,"Drop-off Rate")])],-1)),t("tbody",null,[(r(!0),c(b,null,S(e.engagementStats.dropOffPoints,n=>(r(),c("tr",{key:n.fromContent+n.toContent},[t("td",null,a(n.fromContent),1),t("td",null,a(n.toContent),1),t("td",null,a(n.dropOffCount),1),t("td",null,[t("span",Xs,a(n.dropOffRate)+"%",1)])]))),128))])])])])):C("",!0)]),t("section",Zs,[t("div",$s,[A(g,{name:"trending-up",size:"1.5rem"}),s[27]||(s[27]=t("h2",null,"Performance Analytics",-1))]),t("div",tn,[t("div",en,[s[28]||(s[28]=t("h3",{class:"card-title"},"Lesson Difficulty Analysis",-1)),t("span",sn,a(((T=e.performanceStats.lessonDifficulty)==null?void 0:T.length)||0)+" lessons",1)]),t("div",nn,[t("table",an,[s[29]||(s[29]=t("thead",null,[t("tr",null,[t("th",null,"Lesson"),t("th",null,"Difficulty Score"),t("th",null,"Rating"),t("th",null,"Avg Time"),t("th",null,"Struggle Rate"),t("th",null,"Completion")])],-1)),t("tbody",null,[(r(!0),c(b,null,S((m=e.performanceStats.lessonDifficulty)==null?void 0:m.slice(0,10),n=>{var x,D,N;return r(),c("tr",{key:n.contentId},[t("td",on,a(n.title),1),t("td",null,[t("div",rn,[t("div",{class:"difficulty-fill",style:E({width:n.difficultyScore+"%",backgroundColor:e.getDifficultyColor(n.difficultyScore)})},null,4)]),t("span",cn,a(n.difficultyScore),1)]),t("td",null,[t("span",{class:P(["badge badge-small",e.getDifficultyClass(n.rating)])},a(n.rating.replace("_"," ")),3)]),t("td",null,a(((x=n.metrics)==null?void 0:x.avgTimeMinutes)||0)+"m",1),t("td",null,a(((D=n.metrics)==null?void 0:D.struggleRate)||0)+"%",1),t("td",null,a(((N=n.metrics)==null?void 0:N.completionRate)||0)+"%",1)])}),128))])])])]),e.performanceStats.strugglingStudents&&e.performanceStats.strugglingStudents.length>0?(r(),c("div",ln,[t("div",dn,[s[30]||(s[30]=t("h3",{class:"card-title"},"Students Requiring Support",-1)),t("span",un,a(e.performanceStats.strugglingStudents.length)+" students",1)]),t("div",gn,[t("table",mn,[s[32]||(s[32]=t("thead",null,[t("tr",null,[t("th",null,"Student"),t("th",null,"Struggle Score"),t("th",null,"Completion Rate"),t("th",null,"Avg Score"),t("th",null,"Multiple Attempts"),t("th",null,"Action")])],-1)),t("tbody",null,[(r(!0),c(b,null,S((I=e.performanceStats.strugglingStudents)==null?void 0:I.slice(0,10),n=>(r(),c("tr",{key:n.studentId},[t("td",null,a(n.studentName),1),t("td",null,[t("span",hn,a(n.struggleScore),1)]),t("td",null,a(n.indicators.completionRate)+"%",1),t("td",null,a(n.indicators.avgScore)+"%",1),t("td",null,a(n.indicators.multipleAttempts),1),t("td",null,[A(_,{to:`/students/${n.studentId}`,class:"action-link"},{default:O(()=>[...s[31]||(s[31]=[R("View",-1)])]),_:1},8,["to"])])]))),128))])])])])):C("",!0),e.performanceStats.highPerformers&&e.performanceStats.highPerformers.length>0?(r(),c("div",pn,[t("div",fn,[s[33]||(s[33]=t("h3",{class:"card-title"},"Top Performing Students",-1)),t("span",_n,a(e.performanceStats.highPerformers.length)+" students",1)]),t("div",vn,[t("table",yn,[s[35]||(s[35]=t("thead",null,[t("tr",null,[t("th",null,"Student"),t("th",null,"Performance Score"),t("th",null,"Avg Score"),t("th",null,"Completion Rate"),t("th",null,"Time Efficiency"),t("th",null,"Action")])],-1)),t("tbody",null,[(r(!0),c(b,null,S((M=e.performanceStats.highPerformers)==null?void 0:M.slice(0,10),n=>(r(),c("tr",{key:n.studentId},[t("td",null,a(n.studentName),1),t("td",null,[t("span",bn,a(n.performanceScore),1)]),t("td",null,a(n.metrics.avgScore)+"%",1),t("td",null,a(n.metrics.completionRate)+"%",1),t("td",null,a(n.metrics.timeEfficiency)+"%",1),t("td",null,[A(_,{to:`/students/${n.studentId}`,class:"action-link"},{default:O(()=>[...s[34]||(s[34]=[R("View",-1)])]),_:1},8,["to"])])]))),128))])])])])):C("",!0)]),t("section",Sn,[t("div",Cn,[A(g,{name:"users",size:"1.5rem"}),s[36]||(s[36]=t("h2",null,"Cohort Analysis",-1))]),e.cohortStats.slowdownLessons&&e.cohortStats.slowdownLessons.length>0?(r(),c("div",wn,[t("div",kn,[s[37]||(s[37]=t("h3",{class:"card-title"},"Lessons Causing Slowdown",-1)),t("span",An,a(e.cohortStats.slowdownLessons.length)+" lessons",1)]),t("div",xn,[t("table",In,[s[38]||(s[38]=t("thead",null,[t("tr",null,[t("th",null,"Lesson"),t("th",null,"Estimated Time"),t("th",null,"Actual Time"),t("th",null,"Slowdown Rate"),t("th",null,"Affected Students")])],-1)),t("tbody",null,[(r(!0),c(b,null,S(e.cohortStats.slowdownLessons,n=>(r(),c("tr",{key:n.contentId},[t("td",Mn,a(n.title),1),t("td",null,a(n.estimatedMinutes)+"m",1),t("td",null,a(n.actualMinutes)+"m",1),t("td",null,[t("span",Pn,a(n.slowdownRate)+"%",1)]),t("td",null,a(n.affectedStudents),1)]))),128))])])])])):C("",!0),e.cohortStats.bestContent&&e.cohortStats.bestContent.length>0?(r(),c("div",Rn,[t("div",Tn,[s[39]||(s[39]=t("h3",{class:"card-title"},"Best Performing Content",-1)),t("span",Dn,a(e.cohortStats.bestContent.length)+" lessons",1)]),t("div",Nn,[t("table",Ln,[s[40]||(s[40]=t("thead",null,[t("tr",null,[t("th",null,"Lesson"),t("th",null,"Type"),t("th",null,"Performance Score"),t("th",null,"Completion Rate"),t("th",null,"Avg Score"),t("th",null,"Engagement")])],-1)),t("tbody",null,[(r(!0),c(b,null,S(e.cohortStats.bestContent,n=>(r(),c("tr",{key:n.contentId},[t("td",En,a(n.title),1),t("td",null,[t("span",qn,a(n.type),1)]),t("td",null,[t("span",Fn,a(n.performanceScore),1)]),t("td",null,a(n.metrics.completionRate)+"%",1),t("td",null,a(n.metrics.avgScore)+"%",1),t("td",null,a(n.metrics.engagementCount),1)]))),128))])])])])):C("",!0),t("div",On,[t("div",zn,[s[41]||(s[41]=t("h3",{class:"card-title"},"Class Performance Comparison",-1)),t("span",Bn,a(((F=e.cohortStats.laggingGroups)==null?void 0:F.length)||0)+" classes",1)]),t("div",Gn,[t("table",Hn,[s[42]||(s[42]=t("thead",null,[t("tr",null,[t("th",null,"Class"),t("th",null,"Students"),t("th",null,"Avg Score"),t("th",null,"Completion Rate"),t("th",null,"Engagement Rate"),t("th",null,"Status")])],-1)),t("tbody",null,[(r(!0),c(b,null,S(e.cohortStats.laggingGroups,n=>(r(),c("tr",{key:n.grade+n.class},[t("td",null,[t("strong",null,a(n.grade)+"-"+a(n.class),1)]),t("td",null,a(n.studentCount),1),t("td",null,a(n.avgScore)+"%",1),t("td",null,a(n.completionRate)+"%",1),t("td",null,a(n.engagementRate)+"%",1),t("td",null,[t("span",{class:P(["badge badge-small",n.status==="lagging"?"badge-danger":"badge-success"])},a(n.status.replace("_"," ")),3)])]))),128))])])])])])]))])}const Kn=H(Ht,[["render",Qn],["__scopeId","data-v-b62eac6b"]]);export{Kn as default};
