import{g as C}from"./analyticsService-BUMq7Osh.js";import{S as I}from"./StatCard-BeQBHyb9.js";import{L as R}from"./LoadingSpinner-mqVYkIB7.js";import{E as w}from"./EmptyState-CrgrzoZc.js";import{_ as B,I as D,a as d,b as t,f as L,h as n,y as g,i as r,t as i,p as m,F as b,e as k,r as _,x,o as l,n as S}from"./index-D5JU7zdi.js";import{f as E}from"./format-sbWH3_uq.js";import"./api-DaGFE-z-.js";const M={name:"Dashboard",components:{StatCard:I,LoadingSpinner:R,EmptyState:w,Icon:D},setup(){const v=_(!0),e=_({totalStudents:0,totalContent:0,totalActivities:0,avgEngagementRate:0,avgCompletionRate:0}),h=_(""),o=_([]),f=_([]),y=async()=>{try{v.value=!0;const s=await C();s.success&&(e.value=s.data.summary,h.value=s.data.aiInsight,o.value=s.data.atRiskStudents,f.value=s.data.recentActivities)}catch(s){console.error("Failed to load dashboard:",s)}finally{v.value=!1}},p=s=>`${Math.round(s/6e4)} min`,u=s=>E(new Date(s),"MMM dd, yyyy HH:mm");return x(()=>{y()}),{loading:v,stats:e,aiInsight:h,atRiskStudents:o,recentActivities:f,formatMinutes:p,formatDate:u}}},N={class:"dashboard"},V={key:1},T={class:"stats-grid"},z={class:"grid grid-2"},F={class:"card"},H={class:"card-header"},P={class:"card-title"},q={class:"alert alert-info"},O={class:"mt-2"},W={style:{color:"var(--text-secondary)","font-size":"0.9rem"}},j={class:"card"},G={class:"card-header"},J={class:"card-title"},K={key:0,class:"empty-state"},Q={key:1,class:"risk-list"},U={class:"risk-reason"},X={class:"card"},Y={class:"card-header"},Z={class:"card-title"},$={key:0},tt={key:1,class:"table-container"},et={class:"table"},st={key:0,class:"score"},nt={key:1,style:{color:"var(--text-secondary)"}},at={class:"quick-actions"};function ot(v,e,h,o,f,y){const p=g("LoadingSpinner"),u=g("StatCard"),s=g("Icon"),c=g("router-link"),A=g("EmptyState");return l(),d("div",N,[e[9]||(e[9]=t("div",{class:"page-header"},[t("div",null,[t("h1",null,"Dashboard"),t("p",null,"Welcome to Intellector Analytics Platform")])],-1)),o.loading?(l(),L(p,{key:0,message:"Loading dashboard data..."})):(l(),d("div",V,[t("div",T,[n(u,{icon:"users",value:o.stats.totalStudents,label:"Total Students",iconBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},null,8,["value"]),n(u,{icon:"book",value:o.stats.totalContent,label:"Learning Content",iconBg:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},null,8,["value"]),n(u,{icon:"lightning",value:`${o.stats.avgEngagementRate}%`,label:"Engagement Rate",iconBg:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},null,8,["value"]),n(u,{icon:"check",value:`${o.stats.avgCompletionRate}%`,label:"Completion Rate",iconBg:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},null,8,["value"])]),t("div",z,[t("div",F,[t("div",H,[t("h3",P,[n(s,{name:"brain"}),e[0]||(e[0]=r(" AI Insights",-1))])]),t("div",q,[n(s,{name:"info",size:"1.5rem"}),t("p",null,i(o.aiInsight),1)]),t("div",O,[t("p",W," Based on analysis of "+i(o.stats.totalActivities)+" learning activities ",1)])]),t("div",j,[t("div",G,[t("h3",J,[n(s,{name:"warning"}),e[1]||(e[1]=r(" At-Risk Students",-1))]),n(c,{to:"/analytics",class:"btn btn-small btn-secondary"},{default:m(()=>[...e[2]||(e[2]=[r(" View All ",-1)])]),_:1})]),o.atRiskStudents.length===0?(l(),d("div",K,[t("p",null,[n(s,{name:"check"}),e[3]||(e[3]=r(" No students at risk currently!",-1))])])):(l(),d("div",Q,[(l(!0),d(b,null,k(o.atRiskStudents.slice(0,4),a=>(l(),d("div",{key:a.student.id,class:"risk-item"},[t("div",null,[n(c,{to:`/students/${a.student.id}`,class:"risk-name"},{default:m(()=>[r(i(a.student.name),1)]),_:2},1032,["to"]),t("p",U,i(a.reason),1)]),t("span",{class:S(["badge",`badge-${a.riskLevel==="high"?"danger":"warning"}`])},i(a.riskLevel),3)]))),128))]))])]),t("div",X,[t("div",Y,[t("h3",Z,[n(s,{name:"list"}),e[4]||(e[4]=r(" Recent Activity",-1))])]),o.recentActivities.length===0?(l(),d("div",$,[n(A,{icon:"list",message:"No recent activity"})])):(l(),d("div",tt,[t("table",et,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Student"),t("th",null,"Content"),t("th",null,"Time Spent"),t("th",null,"Status"),t("th",null,"Score"),t("th",null,"Date")])],-1)),t("tbody",null,[(l(!0),d(b,null,k(o.recentActivities,a=>(l(),d("tr",{key:a.id},[t("td",null,[n(c,{to:`/students/${a.studentId}`,style:{color:"var(--primary)","font-weight":"500"}},{default:m(()=>[r(i(a.studentName),1)]),_:2},1032,["to"])]),t("td",null,i(a.contentTitle),1),t("td",null,i(o.formatMinutes(a.durationMs)),1),t("td",null,[t("span",{class:S(["badge",a.completed?"badge-success":"badge-warning"])},i(a.completed?"Completed":"In Progress"),3)]),t("td",null,[a.score!==null?(l(),d("span",st,i(a.score)+"% ",1)):(l(),d("span",nt,"â€”"))]),t("td",null,i(o.formatDate(a.timestamp)),1)]))),128))])])]))]),t("div",at,[n(c,{to:"/content",class:"btn btn-primary"},{default:m(()=>[n(s,{name:"add"}),e[6]||(e[6]=r(" Add Content ",-1))]),_:1}),n(c,{to:"/students",class:"btn btn-primary"},{default:m(()=>[n(s,{name:"person"}),e[7]||(e[7]=r(" Add Student ",-1))]),_:1}),n(c,{to:"/analytics",class:"btn btn-secondary"},{default:m(()=>[n(s,{name:"chart"}),e[8]||(e[8]=r(" View Analytics ",-1))]),_:1})])]))])}const gt=B(M,[["render",ot],["__scopeId","data-v-d8c383ee"]]);export{gt as default};
